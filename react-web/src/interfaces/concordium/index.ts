import { Dispatch } from 'react'

import { WithdrawResult } from 'interfaces/http'
import { detectConcordiumProvider } from "@concordium/browser-wallet-api-helpers";
import {AccountTransactionType} from "@concordium/common-sdk/lib/types";
import {CcdAmount} from "@concordium/common-sdk/lib/types/ccdAmount";
import {
    toBuffer,
    serializeUpdateContractParameters,
} from '@concordium/web-sdk';
import {forEach} from "lodash";
import axios from "axios";


const connectConcordiumWallet = async (setEthereumAccount: Dispatch<string>): Promise<void> => {
  const provider = await detectConcordiumProvider()
  const accountAddress = await provider.connect()
  if (accountAddress != null) {
    setEthereumAccount(accountAddress)
    // provider.addCIS2Tokens(accountAddress, ['2373'], BigInt(2928), BigInt(0));
  }
}

const depositConcordiumTransaction = async (
  stellarAccount: string,
  concordiumAccount: string,
  value: string
): Promise<string> => {
    const provider = await detectConcordiumProvider()
    const ccdValue = Number(value) * 10*10*10*10*10*10*10
    const CONTRACT_NAME = "gbm_Bridge"
    const TOKEN_CONTRACT_INDEX = 2945n
    const CONTRACT_SUB_INDEX = 0n
    const method = 'deposit'
    const byteArrayAccount = Buffer.from(stellarAccount).toJSON().data
    const byteArray256Account = Array(256-byteArrayAccount.length).fill(0)
    Array.prototype.push.apply(byteArray256Account, byteArrayAccount)

    const parameters = {
        amount: ccdValue,
        destination: byteArray256Account
    }
    const BRIDGE_CONTRACT_RAW_SCHEMA = '//8DAQAAAAoAAABnYm1fQnJpZGdlAQAUAAQAAAAFAAAAdG9rZW4MCAAAAHRva2VuX2lkHQAKAAAAdmFsaWRhdG9ycxACEyEAAAACEwAAAHZhbGlkYXRvcnNfcmVxdWlyZWQCDAAAAAwAAABhZGRWYWxpZGF0b3IEEyEAAAACFRQAAAAMAAAAVW5hdXRob3JpemVkAgsAAABQYXJzZVBhcmFtcwIHAAAATG9nRnVsbAIMAAAATG9nTWFsZm9ybWVkAg4AAABDb250cmFjdFBhdXNlZAITAAAASW52b2tlQ29udHJhY3RFcnJvcgITAAAASW52b2tlVHJhbnNmZXJFcnJvcgIaAAAARmFpbGVkVXBncmFkZU1pc3NpbmdNb2R1bGUCHAAAAEZhaWxlZFVwZ3JhZGVNaXNzaW5nQ29udHJhY3QCJQAAAEZhaWxlZFVwZ3JhZGVVbnN1cHBvcnRlZE1vZHVsZVZlcnNpb24CIAAAAEludmFsaWRDb3VudE9GVmFsaWRhdG9yc1JlcXVpcmVkAhoAAABEdXBsaWNhdGVXaXRoZHJhd1JlcXVlc3RlZAIUAAAAV2l0aGRyYXdBbW91bnRJc1plcm8CEwAAAFdpdGhkcmF3YWxJc0V4cGlyZWQCFQAAAEludmFsaWRWYWxpZGF0b3JJbmRleAIXAAAARHVwbGljYXRlVmFsaWRhdG9ySW5kZXgCIwAAAEludmFsaWROdW1iZXJPZlNpZ25hdHVyZXNBbmRJbmRleGVzAiMAAABJbmNvcnJlY3ROdW1iZXJPZlNpZ25hdHVyZXNTdXBwbGllZAIQAAAASW52YWxpZFNpZ25hdHVyZQITAAAARGVwb3NpdEFtb3VudElzWmVybwIHAAAAZGVwb3NpdAQUAAIAAAALAAAAZGVzdGluYXRpb24TAAEAAAIGAAAAYW1vdW50BRUUAAAADAAAAFVuYXV0aG9yaXplZAILAAAAUGFyc2VQYXJhbXMCBwAAAExvZ0Z1bGwCDAAAAExvZ01hbGZvcm1lZAIOAAAAQ29udHJhY3RQYXVzZWQCEwAAAEludm9rZUNvbnRyYWN0RXJyb3ICEwAAAEludm9rZVRyYW5zZmVyRXJyb3ICGgAAAEZhaWxlZFVwZ3JhZGVNaXNzaW5nTW9kdWxlAhwAAABGYWlsZWRVcGdyYWRlTWlzc2luZ0NvbnRyYWN0AiUAAABGYWlsZWRVcGdyYWRlVW5zdXBwb3J0ZWRNb2R1bGVWZXJzaW9uAiAAAABJbnZhbGlkQ291bnRPRlZhbGlkYXRvcnNSZXF1aXJlZAIaAAAARHVwbGljYXRlV2l0aGRyYXdSZXF1ZXN0ZWQCFAAAAFdpdGhkcmF3QW1vdW50SXNaZXJvAhMAAABXaXRoZHJhd2FsSXNFeHBpcmVkAhUAAABJbnZhbGlkVmFsaWRhdG9ySW5kZXgCFwAAAER1cGxpY2F0ZVZhbGlkYXRvckluZGV4AiMAAABJbnZhbGlkTnVtYmVyT2ZTaWduYXR1cmVzQW5kSW5kZXhlcwIjAAAASW5jb3JyZWN0TnVtYmVyT2ZTaWduYXR1cmVzU3VwcGxpZWQCEAAAAEludmFsaWRTaWduYXR1cmUCEwAAAERlcG9zaXRBbW91bnRJc1plcm8CDwAAAHJlbW92ZVZhbGlkYXRvcgQTIQAAAAIVFAAAAAwAAABVbmF1dGhvcml6ZWQCCwAAAFBhcnNlUGFyYW1zAgcAAABMb2dGdWxsAgwAAABMb2dNYWxmb3JtZWQCDgAAAENvbnRyYWN0UGF1c2VkAhMAAABJbnZva2VDb250cmFjdEVycm9yAhMAAABJbnZva2VUcmFuc2ZlckVycm9yAhoAAABGYWlsZWRVcGdyYWRlTWlzc2luZ01vZHVsZQIcAAAARmFpbGVkVXBncmFkZU1pc3NpbmdDb250cmFjdAIlAAAARmFpbGVkVXBncmFkZVVuc3VwcG9ydGVkTW9kdWxlVmVyc2lvbgIgAAAASW52YWxpZENvdW50T0ZWYWxpZGF0b3JzUmVxdWlyZWQCGgAAAER1cGxpY2F0ZVdpdGhkcmF3UmVxdWVzdGVkAhQAAABXaXRoZHJhd0Ftb3VudElzWmVybwITAAAAV2l0aGRyYXdhbElzRXhwaXJlZAIVAAAASW52YWxpZFZhbGlkYXRvckluZGV4AhcAAABEdXBsaWNhdGVWYWxpZGF0b3JJbmRleAIjAAAASW52YWxpZE51bWJlck9mU2lnbmF0dXJlc0FuZEluZGV4ZXMCIwAAAEluY29ycmVjdE51bWJlck9mU2lnbmF0dXJlc1N1cHBsaWVkAhAAAABJbnZhbGlkU2lnbmF0dXJlAhMAAABEZXBvc2l0QW1vdW50SXNaZXJvAg8AAABzZXRJbXBsZW1lbnRvcnMEFAACAAAAAgAAAGlkFgAMAAAAaW1wbGVtZW50b3JzEAIMFRQAAAAMAAAAVW5hdXRob3JpemVkAgsAAABQYXJzZVBhcmFtcwIHAAAATG9nRnVsbAIMAAAATG9nTWFsZm9ybWVkAg4AAABDb250cmFjdFBhdXNlZAITAAAASW52b2tlQ29udHJhY3RFcnJvcgITAAAASW52b2tlVHJhbnNmZXJFcnJvcgIaAAAARmFpbGVkVXBncmFkZU1pc3NpbmdNb2R1bGUCHAAAAEZhaWxlZFVwZ3JhZGVNaXNzaW5nQ29udHJhY3QCJQAAAEZhaWxlZFVwZ3JhZGVVbnN1cHBvcnRlZE1vZHVsZVZlcnNpb24CIAAAAEludmFsaWRDb3VudE9GVmFsaWRhdG9yc1JlcXVpcmVkAhoAAABEdXBsaWNhdGVXaXRoZHJhd1JlcXVlc3RlZAIUAAAAV2l0aGRyYXdBbW91bnRJc1plcm8CEwAAAFdpdGhkcmF3YWxJc0V4cGlyZWQCFQAAAEludmFsaWRWYWxpZGF0b3JJbmRleAIXAAAARHVwbGljYXRlVmFsaWRhdG9ySW5kZXgCIwAAAEludmFsaWROdW1iZXJPZlNpZ25hdHVyZXNBbmRJbmRleGVzAiMAAABJbmNvcnJlY3ROdW1iZXJPZlNpZ25hdHVyZXNTdXBwbGllZAIQAAAASW52YWxpZFNpZ25hdHVyZQITAAAARGVwb3NpdEFtb3VudElzWmVybwIJAAAAc2V0UGF1c2VkBBQAAQAAAAYAAABwYXVzZWQBFRQAAAAMAAAAVW5hdXRob3JpemVkAgsAAABQYXJzZVBhcmFtcwIHAAAATG9nRnVsbAIMAAAATG9nTWFsZm9ybWVkAg4AAABDb250cmFjdFBhdXNlZAITAAAASW52b2tlQ29udHJhY3RFcnJvcgITAAAASW52b2tlVHJhbnNmZXJFcnJvcgIaAAAARmFpbGVkVXBncmFkZU1pc3NpbmdNb2R1bGUCHAAAAEZhaWxlZFVwZ3JhZGVNaXNzaW5nQ29udHJhY3QCJQAAAEZhaWxlZFVwZ3JhZGVVbnN1cHBvcnRlZE1vZHVsZVZlcnNpb24CIAAAAEludmFsaWRDb3VudE9GVmFsaWRhdG9yc1JlcXVpcmVkAhoAAABEdXBsaWNhdGVXaXRoZHJhd1JlcXVlc3RlZAIUAAAAV2l0aGRyYXdBbW91bnRJc1plcm8CEwAAAFdpdGhkcmF3YWxJc0V4cGlyZWQCFQAAAEludmFsaWRWYWxpZGF0b3JJbmRleAIXAAAARHVwbGljYXRlVmFsaWRhdG9ySW5kZXgCIwAAAEludmFsaWROdW1iZXJPZlNpZ25hdHVyZXNBbmRJbmRleGVzAiMAAABJbmNvcnJlY3ROdW1iZXJPZlNpZ25hdHVyZXNTdXBwbGllZAIQAAAASW52YWxpZFNpZ25hdHVyZQITAAAARGVwb3NpdEFtb3VudElzWmVybwIVAAAAc2V0VmFsaWRhdG9yc1JlcXVpcmVkBAQVFAAAAAwAAABVbmF1dGhvcml6ZWQCCwAAAFBhcnNlUGFyYW1zAgcAAABMb2dGdWxsAgwAAABMb2dNYWxmb3JtZWQCDgAAAENvbnRyYWN0UGF1c2VkAhMAAABJbnZva2VDb250cmFjdEVycm9yAhMAAABJbnZva2VUcmFuc2ZlckVycm9yAhoAAABGYWlsZWRVcGdyYWRlTWlzc2luZ01vZHVsZQIcAAAARmFpbGVkVXBncmFkZU1pc3NpbmdDb250cmFjdAIlAAAARmFpbGVkVXBncmFkZVVuc3VwcG9ydGVkTW9kdWxlVmVyc2lvbgIgAAAASW52YWxpZENvdW50T0ZWYWxpZGF0b3JzUmVxdWlyZWQCGgAAAER1cGxpY2F0ZVdpdGhkcmF3UmVxdWVzdGVkAhQAAABXaXRoZHJhd0Ftb3VudElzWmVybwITAAAAV2l0aGRyYXdhbElzRXhwaXJlZAIVAAAASW52YWxpZFZhbGlkYXRvckluZGV4AhcAAABEdXBsaWNhdGVWYWxpZGF0b3JJbmRleAIjAAAASW52YWxpZE51bWJlck9mU2lnbmF0dXJlc0FuZEluZGV4ZXMCIwAAAEluY29ycmVjdE51bWJlck9mU2lnbmF0dXJlc1N1cHBsaWVkAhAAAABJbnZhbGlkU2lnbmF0dXJlAhMAAABEZXBvc2l0QW1vdW50SXNaZXJvAggAAABzdXBwb3J0cwYQARYAEAEVAwAAAAkAAABOb1N1cHBvcnQCBwAAAFN1cHBvcnQCCQAAAFN1cHBvcnRCeQEBAAAAEAAMFRQAAAAMAAAAVW5hdXRob3JpemVkAgsAAABQYXJzZVBhcmFtcwIHAAAATG9nRnVsbAIMAAAATG9nTWFsZm9ybWVkAg4AAABDb250cmFjdFBhdXNlZAITAAAASW52b2tlQ29udHJhY3RFcnJvcgITAAAASW52b2tlVHJhbnNmZXJFcnJvcgIaAAAARmFpbGVkVXBncmFkZU1pc3NpbmdNb2R1bGUCHAAAAEZhaWxlZFVwZ3JhZGVNaXNzaW5nQ29udHJhY3QCJQAAAEZhaWxlZFVwZ3JhZGVVbnN1cHBvcnRlZE1vZHVsZVZlcnNpb24CIAAAAEludmFsaWRDb3VudE9GVmFsaWRhdG9yc1JlcXVpcmVkAhoAAABEdXBsaWNhdGVXaXRoZHJhd1JlcXVlc3RlZAIUAAAAV2l0aGRyYXdBbW91bnRJc1plcm8CEwAAAFdpdGhkcmF3YWxJc0V4cGlyZWQCFQAAAEludmFsaWRWYWxpZGF0b3JJbmRleAIXAAAARHVwbGljYXRlVmFsaWRhdG9ySW5kZXgCIwAAAEludmFsaWROdW1iZXJPZlNpZ25hdHVyZXNBbmRJbmRleGVzAiMAAABJbmNvcnJlY3ROdW1iZXJPZlNpZ25hdHVyZXNTdXBwbGllZAIQAAAASW52YWxpZFNpZ25hdHVyZQITAAAARGVwb3NpdEFtb3VudElzWmVybwILAAAAdXBkYXRlQWRtaW4EFQIAAAAHAAAAQWNjb3VudAEBAAAACwgAAABDb250cmFjdAEBAAAADBUUAAAADAAAAFVuYXV0aG9yaXplZAILAAAAUGFyc2VQYXJhbXMCBwAAAExvZ0Z1bGwCDAAAAExvZ01hbGZvcm1lZAIOAAAAQ29udHJhY3RQYXVzZWQCEwAAAEludm9rZUNvbnRyYWN0RXJyb3ICEwAAAEludm9rZVRyYW5zZmVyRXJyb3ICGgAAAEZhaWxlZFVwZ3JhZGVNaXNzaW5nTW9kdWxlAhwAAABGYWlsZWRVcGdyYWRlTWlzc2luZ0NvbnRyYWN0AiUAAABGYWlsZWRVcGdyYWRlVW5zdXBwb3J0ZWRNb2R1bGVWZXJzaW9uAiAAAABJbnZhbGlkQ291bnRPRlZhbGlkYXRvcnNSZXF1aXJlZAIaAAAARHVwbGljYXRlV2l0aGRyYXdSZXF1ZXN0ZWQCFAAAAFdpdGhkcmF3QW1vdW50SXNaZXJvAhMAAABXaXRoZHJhd2FsSXNFeHBpcmVkAhUAAABJbnZhbGlkVmFsaWRhdG9ySW5kZXgCFwAAAER1cGxpY2F0ZVZhbGlkYXRvckluZGV4AiMAAABJbnZhbGlkTnVtYmVyT2ZTaWduYXR1cmVzQW5kSW5kZXhlcwIjAAAASW5jb3JyZWN0TnVtYmVyT2ZTaWduYXR1cmVzU3VwcGxpZWQCEAAAAEludmFsaWRTaWduYXR1cmUCEwAAAERlcG9zaXRBbW91bnRJc1plcm8CBwAAAHVwZ3JhZGUEFAACAAAABgAAAG1vZHVsZR4gAAAABwAAAG1pZ3JhdGUVAgAAAAQAAABOb25lAgQAAABTb21lAQEAAAAPFgEdARUUAAAADAAAAFVuYXV0aG9yaXplZAILAAAAUGFyc2VQYXJhbXMCBwAAAExvZ0Z1bGwCDAAAAExvZ01hbGZvcm1lZAIOAAAAQ29udHJhY3RQYXVzZWQCEwAAAEludm9rZUNvbnRyYWN0RXJyb3ICEwAAAEludm9rZVRyYW5zZmVyRXJyb3ICGgAAAEZhaWxlZFVwZ3JhZGVNaXNzaW5nTW9kdWxlAhwAAABGYWlsZWRVcGdyYWRlTWlzc2luZ0NvbnRyYWN0AiUAAABGYWlsZWRVcGdyYWRlVW5zdXBwb3J0ZWRNb2R1bGVWZXJzaW9uAiAAAABJbnZhbGlkQ291bnRPRlZhbGlkYXRvcnNSZXF1aXJlZAIaAAAARHVwbGljYXRlV2l0aGRyYXdSZXF1ZXN0ZWQCFAAAAFdpdGhkcmF3QW1vdW50SXNaZXJvAhMAAABXaXRoZHJhd2FsSXNFeHBpcmVkAhUAAABJbnZhbGlkVmFsaWRhdG9ySW5kZXgCFwAAAER1cGxpY2F0ZVZhbGlkYXRvckluZGV4AiMAAABJbnZhbGlkTnVtYmVyT2ZTaWduYXR1cmVzQW5kSW5kZXhlcwIjAAAASW5jb3JyZWN0TnVtYmVyT2ZTaWduYXR1cmVzU3VwcGxpZWQCEAAAAEludmFsaWRTaWduYXR1cmUCEwAAAERlcG9zaXRBbW91bnRJc1plcm8CBAAAAHZpZXcFFAAHAAAABQAAAGFkbWluFQIAAAAHAAAAQWNjb3VudAEBAAAACwgAAABDb250cmFjdAEBAAAADAUAAAB0b2tlbgwIAAAAdG9rZW5faWQdAAYAAABwYXVzZWQBCgAAAHZhbGlkYXRvcnMQAhMhAAAAAhMAAAB2YWxpZGF0b3JzX3JlcXVpcmVkAgcAAAB2ZXJzaW9uBBUUAAAADAAAAFVuYXV0aG9yaXplZAILAAAAUGFyc2VQYXJhbXMCBwAAAExvZ0Z1bGwCDAAAAExvZ01hbGZvcm1lZAIOAAAAQ29udHJhY3RQYXVzZWQCEwAAAEludm9rZUNvbnRyYWN0RXJyb3ICEwAAAEludm9rZVRyYW5zZmVyRXJyb3ICGgAAAEZhaWxlZFVwZ3JhZGVNaXNzaW5nTW9kdWxlAhwAAABGYWlsZWRVcGdyYWRlTWlzc2luZ0NvbnRyYWN0AiUAAABGYWlsZWRVcGdyYWRlVW5zdXBwb3J0ZWRNb2R1bGVWZXJzaW9uAiAAAABJbnZhbGlkQ291bnRPRlZhbGlkYXRvcnNSZXF1aXJlZAIaAAAARHVwbGljYXRlV2l0aGRyYXdSZXF1ZXN0ZWQCFAAAAFdpdGhkcmF3QW1vdW50SXNaZXJvAhMAAABXaXRoZHJhd2FsSXNFeHBpcmVkAhUAAABJbnZhbGlkVmFsaWRhdG9ySW5kZXgCFwAAAER1cGxpY2F0ZVZhbGlkYXRvckluZGV4AiMAAABJbnZhbGlkTnVtYmVyT2ZTaWduYXR1cmVzQW5kSW5kZXhlcwIjAAAASW5jb3JyZWN0TnVtYmVyT2ZTaWduYXR1cmVzU3VwcGxpZWQCEAAAAEludmFsaWRTaWduYXR1cmUCEwAAAERlcG9zaXRBbW91bnRJc1plcm8CCAAAAHdpdGhkcmF3BBQABgAAAAIAAABpZBMgAAAAAgoAAABleHBpcmF0aW9uBQIAAAB0bxUCAAAABwAAAEFjY291bnQBAQAAAAsIAAAAQ29udHJhY3QBAQAAAAwGAAAAYW1vdW50BQoAAABzaWduYXR1cmVzEAITQAAAAAIHAAAAaW5kZXhlcxACAhUUAAAADAAAAFVuYXV0aG9yaXplZAILAAAAUGFyc2VQYXJhbXMCBwAAAExvZ0Z1bGwCDAAAAExvZ01hbGZvcm1lZAIOAAAAQ29udHJhY3RQYXVzZWQCEwAAAEludm9rZUNvbnRyYWN0RXJyb3ICEwAAAEludm9rZVRyYW5zZmVyRXJyb3ICGgAAAEZhaWxlZFVwZ3JhZGVNaXNzaW5nTW9kdWxlAhwAAABGYWlsZWRVcGdyYWRlTWlzc2luZ0NvbnRyYWN0AiUAAABGYWlsZWRVcGdyYWRlVW5zdXBwb3J0ZWRNb2R1bGVWZXJzaW9uAiAAAABJbnZhbGlkQ291bnRPRlZhbGlkYXRvcnNSZXF1aXJlZAIaAAAARHVwbGljYXRlV2l0aGRyYXdSZXF1ZXN0ZWQCFAAAAFdpdGhkcmF3QW1vdW50SXNaZXJvAhMAAABXaXRoZHJhd2FsSXNFeHBpcmVkAhUAAABJbnZhbGlkVmFsaWRhdG9ySW5kZXgCFwAAAER1cGxpY2F0ZVZhbGlkYXRvckluZGV4AiMAAABJbnZhbGlkTnVtYmVyT2ZTaWduYXR1cmVzQW5kSW5kZXhlcwIjAAAASW5jb3JyZWN0TnVtYmVyT2ZTaWduYXR1cmVzU3VwcGxpZWQCEAAAAEludmFsaWRTaWduYXR1cmUCEwAAAERlcG9zaXRBbW91bnRJc1plcm8CDQAAAHdpdGhkcmF3X2hhc2gGFAAGAAAAAgAAAGlkEyAAAAACCgAAAGV4cGlyYXRpb24FAgAAAHRvFQIAAAAHAAAAQWNjb3VudAEBAAAACwgAAABDb250cmFjdAEBAAAADAYAAABhbW91bnQFCgAAAHNpZ25hdHVyZXMQAhNAAAAAAgcAAABpbmRleGVzEAICFAABAAAABAAAAGhhc2gTIAAAAAIVFAAAAAwAAABVbmF1dGhvcml6ZWQCCwAAAFBhcnNlUGFyYW1zAgcAAABMb2dGdWxsAgwAAABMb2dNYWxmb3JtZWQCDgAAAENvbnRyYWN0UGF1c2VkAhMAAABJbnZva2VDb250cmFjdEVycm9yAhMAAABJbnZva2VUcmFuc2ZlckVycm9yAhoAAABGYWlsZWRVcGdyYWRlTWlzc2luZ01vZHVsZQIcAAAARmFpbGVkVXBncmFkZU1pc3NpbmdDb250cmFjdAIlAAAARmFpbGVkVXBncmFkZVVuc3VwcG9ydGVkTW9kdWxlVmVyc2lvbgIgAAAASW52YWxpZENvdW50T0ZWYWxpZGF0b3JzUmVxdWlyZWQCGgAAAER1cGxpY2F0ZVdpdGhkcmF3UmVxdWVzdGVkAhQAAABXaXRoZHJhd0Ftb3VudElzWmVybwITAAAAV2l0aGRyYXdhbElzRXhwaXJlZAIVAAAASW52YWxpZFZhbGlkYXRvckluZGV4AhcAAABEdXBsaWNhdGVWYWxpZGF0b3JJbmRleAIjAAAASW52YWxpZE51bWJlck9mU2lnbmF0dXJlc0FuZEluZGV4ZXMCIwAAAEluY29ycmVjdE51bWJlck9mU2lnbmF0dXJlc1N1cHBsaWVkAhAAAABJbnZhbGlkU2lnbmF0dXJlAhMAAABEZXBvc2l0QW1vdW50SXNaZXJvAgEfBgAAAAAIAAAATmV3QWRtaW4AAQAAAAkAAABuZXdfYWRtaW4VAgAAAAcAAABBY2NvdW50AQEAAAALCAAAAENvbnRyYWN0AQEAAAAMAQcAAABEZXBvc2l0AAMAAAAGAAAAc2VuZGVyFQIAAAAHAAAAQWNjb3VudAEBAAAACwgAAABDb250cmFjdAEBAAAADAsAAABkZXN0aW5hdGlvbh4gAAAABgAAAGFtb3VudAUCCAAAAFdpdGhkcmF3AAMAAAACAAAAaWQeIAAAAAkAAAByZWNpcGllbnQVAgAAAAcAAABBY2NvdW50AQEAAAALCAAAAENvbnRyYWN0AQEAAAAMBgAAAGFtb3VudAUEDAAAAEFkZFZhbGlkYXRvcgACAAAACQAAAHZhbGlkYXRvch4gAAAABwAAAHZlcnNpb24EBQ8AAABSZW1vdmVWYWxpZGF0b3IAAgAAAAkAAAB2YWxpZGF0b3IeIAAAAAcAAAB2ZXJzaW9uBAYVAAAAU2V0UmVxdWlyZWRWYWxpZGF0b3JzAAEAAAATAAAAdmFsaWRhdG9yc19yZXF1aXJlZAI'
    const txHash = provider.sendTransaction(
        concordiumAccount,
        AccountTransactionType.Update,
        {
            amount: new CcdAmount(0n),
            address: {
                index: TOKEN_CONTRACT_INDEX,
                subindex: CONTRACT_SUB_INDEX,
            },
            receiveName: `${CONTRACT_NAME}.${method}`,
            maxContractExecutionEnergy: 100000n,
        },
        parameters,
        BRIDGE_CONTRACT_RAW_SCHEMA,
        0
    )


    return txHash
}

const withdrawConcordiumTransaction = async (
  withdrawResult: WithdrawResult[],
  concordiumAccount: string,
): Promise<void> => {
    const provider = await detectConcordiumProvider()
    if (provider) {
        const CONTRACT_NAME = "gbm_Bridge"
        const TOKEN_CONTRACT_INDEX = 2945n
        const CONTRACT_SUB_INDEX = 0n
        const method = 'withdraw'
        const parameters = {
                "amount": +withdrawResult[0].amount,
                "expiration": +withdrawResult[0].expiration * 1000,
                "id": Buffer.from(withdrawResult[0].deposit_id, "hex").toJSON().data,
                "indexes": [0],
                "signatures": [
                    Buffer.from(withdrawResult[0].signature, "hex").toJSON().data
                ],
                "to": {
                    "Account": [withdrawResult[0].address]
                }
            }
        const BRIDGE_CONTRACT_RAW_SCHEMA = '//8DAQAAAAoAAABnYm1fQnJpZGdlAQAUAAQAAAAFAAAAdG9rZW4MCAAAAHRva2VuX2lkHQAKAAAAdmFsaWRhdG9ycxACEyEAAAACEwAAAHZhbGlkYXRvcnNfcmVxdWlyZWQCDAAAAAwAAABhZGRWYWxpZGF0b3IEEyEAAAACFRQAAAAMAAAAVW5hdXRob3JpemVkAgsAAABQYXJzZVBhcmFtcwIHAAAATG9nRnVsbAIMAAAATG9nTWFsZm9ybWVkAg4AAABDb250cmFjdFBhdXNlZAITAAAASW52b2tlQ29udHJhY3RFcnJvcgITAAAASW52b2tlVHJhbnNmZXJFcnJvcgIaAAAARmFpbGVkVXBncmFkZU1pc3NpbmdNb2R1bGUCHAAAAEZhaWxlZFVwZ3JhZGVNaXNzaW5nQ29udHJhY3QCJQAAAEZhaWxlZFVwZ3JhZGVVbnN1cHBvcnRlZE1vZHVsZVZlcnNpb24CIAAAAEludmFsaWRDb3VudE9GVmFsaWRhdG9yc1JlcXVpcmVkAhoAAABEdXBsaWNhdGVXaXRoZHJhd1JlcXVlc3RlZAIUAAAAV2l0aGRyYXdBbW91bnRJc1plcm8CEwAAAFdpdGhkcmF3YWxJc0V4cGlyZWQCFQAAAEludmFsaWRWYWxpZGF0b3JJbmRleAIXAAAARHVwbGljYXRlVmFsaWRhdG9ySW5kZXgCIwAAAEludmFsaWROdW1iZXJPZlNpZ25hdHVyZXNBbmRJbmRleGVzAiMAAABJbmNvcnJlY3ROdW1iZXJPZlNpZ25hdHVyZXNTdXBwbGllZAIQAAAASW52YWxpZFNpZ25hdHVyZQITAAAARGVwb3NpdEFtb3VudElzWmVybwIHAAAAZGVwb3NpdAQUAAIAAAALAAAAZGVzdGluYXRpb24TAAEAAAIGAAAAYW1vdW50BRUUAAAADAAAAFVuYXV0aG9yaXplZAILAAAAUGFyc2VQYXJhbXMCBwAAAExvZ0Z1bGwCDAAAAExvZ01hbGZvcm1lZAIOAAAAQ29udHJhY3RQYXVzZWQCEwAAAEludm9rZUNvbnRyYWN0RXJyb3ICEwAAAEludm9rZVRyYW5zZmVyRXJyb3ICGgAAAEZhaWxlZFVwZ3JhZGVNaXNzaW5nTW9kdWxlAhwAAABGYWlsZWRVcGdyYWRlTWlzc2luZ0NvbnRyYWN0AiUAAABGYWlsZWRVcGdyYWRlVW5zdXBwb3J0ZWRNb2R1bGVWZXJzaW9uAiAAAABJbnZhbGlkQ291bnRPRlZhbGlkYXRvcnNSZXF1aXJlZAIaAAAARHVwbGljYXRlV2l0aGRyYXdSZXF1ZXN0ZWQCFAAAAFdpdGhkcmF3QW1vdW50SXNaZXJvAhMAAABXaXRoZHJhd2FsSXNFeHBpcmVkAhUAAABJbnZhbGlkVmFsaWRhdG9ySW5kZXgCFwAAAER1cGxpY2F0ZVZhbGlkYXRvckluZGV4AiMAAABJbnZhbGlkTnVtYmVyT2ZTaWduYXR1cmVzQW5kSW5kZXhlcwIjAAAASW5jb3JyZWN0TnVtYmVyT2ZTaWduYXR1cmVzU3VwcGxpZWQCEAAAAEludmFsaWRTaWduYXR1cmUCEwAAAERlcG9zaXRBbW91bnRJc1plcm8CDwAAAHJlbW92ZVZhbGlkYXRvcgQTIQAAAAIVFAAAAAwAAABVbmF1dGhvcml6ZWQCCwAAAFBhcnNlUGFyYW1zAgcAAABMb2dGdWxsAgwAAABMb2dNYWxmb3JtZWQCDgAAAENvbnRyYWN0UGF1c2VkAhMAAABJbnZva2VDb250cmFjdEVycm9yAhMAAABJbnZva2VUcmFuc2ZlckVycm9yAhoAAABGYWlsZWRVcGdyYWRlTWlzc2luZ01vZHVsZQIcAAAARmFpbGVkVXBncmFkZU1pc3NpbmdDb250cmFjdAIlAAAARmFpbGVkVXBncmFkZVVuc3VwcG9ydGVkTW9kdWxlVmVyc2lvbgIgAAAASW52YWxpZENvdW50T0ZWYWxpZGF0b3JzUmVxdWlyZWQCGgAAAER1cGxpY2F0ZVdpdGhkcmF3UmVxdWVzdGVkAhQAAABXaXRoZHJhd0Ftb3VudElzWmVybwITAAAAV2l0aGRyYXdhbElzRXhwaXJlZAIVAAAASW52YWxpZFZhbGlkYXRvckluZGV4AhcAAABEdXBsaWNhdGVWYWxpZGF0b3JJbmRleAIjAAAASW52YWxpZE51bWJlck9mU2lnbmF0dXJlc0FuZEluZGV4ZXMCIwAAAEluY29ycmVjdE51bWJlck9mU2lnbmF0dXJlc1N1cHBsaWVkAhAAAABJbnZhbGlkU2lnbmF0dXJlAhMAAABEZXBvc2l0QW1vdW50SXNaZXJvAg8AAABzZXRJbXBsZW1lbnRvcnMEFAACAAAAAgAAAGlkFgAMAAAAaW1wbGVtZW50b3JzEAIMFRQAAAAMAAAAVW5hdXRob3JpemVkAgsAAABQYXJzZVBhcmFtcwIHAAAATG9nRnVsbAIMAAAATG9nTWFsZm9ybWVkAg4AAABDb250cmFjdFBhdXNlZAITAAAASW52b2tlQ29udHJhY3RFcnJvcgITAAAASW52b2tlVHJhbnNmZXJFcnJvcgIaAAAARmFpbGVkVXBncmFkZU1pc3NpbmdNb2R1bGUCHAAAAEZhaWxlZFVwZ3JhZGVNaXNzaW5nQ29udHJhY3QCJQAAAEZhaWxlZFVwZ3JhZGVVbnN1cHBvcnRlZE1vZHVsZVZlcnNpb24CIAAAAEludmFsaWRDb3VudE9GVmFsaWRhdG9yc1JlcXVpcmVkAhoAAABEdXBsaWNhdGVXaXRoZHJhd1JlcXVlc3RlZAIUAAAAV2l0aGRyYXdBbW91bnRJc1plcm8CEwAAAFdpdGhkcmF3YWxJc0V4cGlyZWQCFQAAAEludmFsaWRWYWxpZGF0b3JJbmRleAIXAAAARHVwbGljYXRlVmFsaWRhdG9ySW5kZXgCIwAAAEludmFsaWROdW1iZXJPZlNpZ25hdHVyZXNBbmRJbmRleGVzAiMAAABJbmNvcnJlY3ROdW1iZXJPZlNpZ25hdHVyZXNTdXBwbGllZAIQAAAASW52YWxpZFNpZ25hdHVyZQITAAAARGVwb3NpdEFtb3VudElzWmVybwIJAAAAc2V0UGF1c2VkBBQAAQAAAAYAAABwYXVzZWQBFRQAAAAMAAAAVW5hdXRob3JpemVkAgsAAABQYXJzZVBhcmFtcwIHAAAATG9nRnVsbAIMAAAATG9nTWFsZm9ybWVkAg4AAABDb250cmFjdFBhdXNlZAITAAAASW52b2tlQ29udHJhY3RFcnJvcgITAAAASW52b2tlVHJhbnNmZXJFcnJvcgIaAAAARmFpbGVkVXBncmFkZU1pc3NpbmdNb2R1bGUCHAAAAEZhaWxlZFVwZ3JhZGVNaXNzaW5nQ29udHJhY3QCJQAAAEZhaWxlZFVwZ3JhZGVVbnN1cHBvcnRlZE1vZHVsZVZlcnNpb24CIAAAAEludmFsaWRDb3VudE9GVmFsaWRhdG9yc1JlcXVpcmVkAhoAAABEdXBsaWNhdGVXaXRoZHJhd1JlcXVlc3RlZAIUAAAAV2l0aGRyYXdBbW91bnRJc1plcm8CEwAAAFdpdGhkcmF3YWxJc0V4cGlyZWQCFQAAAEludmFsaWRWYWxpZGF0b3JJbmRleAIXAAAARHVwbGljYXRlVmFsaWRhdG9ySW5kZXgCIwAAAEludmFsaWROdW1iZXJPZlNpZ25hdHVyZXNBbmRJbmRleGVzAiMAAABJbmNvcnJlY3ROdW1iZXJPZlNpZ25hdHVyZXNTdXBwbGllZAIQAAAASW52YWxpZFNpZ25hdHVyZQITAAAARGVwb3NpdEFtb3VudElzWmVybwIVAAAAc2V0VmFsaWRhdG9yc1JlcXVpcmVkBAQVFAAAAAwAAABVbmF1dGhvcml6ZWQCCwAAAFBhcnNlUGFyYW1zAgcAAABMb2dGdWxsAgwAAABMb2dNYWxmb3JtZWQCDgAAAENvbnRyYWN0UGF1c2VkAhMAAABJbnZva2VDb250cmFjdEVycm9yAhMAAABJbnZva2VUcmFuc2ZlckVycm9yAhoAAABGYWlsZWRVcGdyYWRlTWlzc2luZ01vZHVsZQIcAAAARmFpbGVkVXBncmFkZU1pc3NpbmdDb250cmFjdAIlAAAARmFpbGVkVXBncmFkZVVuc3VwcG9ydGVkTW9kdWxlVmVyc2lvbgIgAAAASW52YWxpZENvdW50T0ZWYWxpZGF0b3JzUmVxdWlyZWQCGgAAAER1cGxpY2F0ZVdpdGhkcmF3UmVxdWVzdGVkAhQAAABXaXRoZHJhd0Ftb3VudElzWmVybwITAAAAV2l0aGRyYXdhbElzRXhwaXJlZAIVAAAASW52YWxpZFZhbGlkYXRvckluZGV4AhcAAABEdXBsaWNhdGVWYWxpZGF0b3JJbmRleAIjAAAASW52YWxpZE51bWJlck9mU2lnbmF0dXJlc0FuZEluZGV4ZXMCIwAAAEluY29ycmVjdE51bWJlck9mU2lnbmF0dXJlc1N1cHBsaWVkAhAAAABJbnZhbGlkU2lnbmF0dXJlAhMAAABEZXBvc2l0QW1vdW50SXNaZXJvAggAAABzdXBwb3J0cwYQARYAEAEVAwAAAAkAAABOb1N1cHBvcnQCBwAAAFN1cHBvcnQCCQAAAFN1cHBvcnRCeQEBAAAAEAAMFRQAAAAMAAAAVW5hdXRob3JpemVkAgsAAABQYXJzZVBhcmFtcwIHAAAATG9nRnVsbAIMAAAATG9nTWFsZm9ybWVkAg4AAABDb250cmFjdFBhdXNlZAITAAAASW52b2tlQ29udHJhY3RFcnJvcgITAAAASW52b2tlVHJhbnNmZXJFcnJvcgIaAAAARmFpbGVkVXBncmFkZU1pc3NpbmdNb2R1bGUCHAAAAEZhaWxlZFVwZ3JhZGVNaXNzaW5nQ29udHJhY3QCJQAAAEZhaWxlZFVwZ3JhZGVVbnN1cHBvcnRlZE1vZHVsZVZlcnNpb24CIAAAAEludmFsaWRDb3VudE9GVmFsaWRhdG9yc1JlcXVpcmVkAhoAAABEdXBsaWNhdGVXaXRoZHJhd1JlcXVlc3RlZAIUAAAAV2l0aGRyYXdBbW91bnRJc1plcm8CEwAAAFdpdGhkcmF3YWxJc0V4cGlyZWQCFQAAAEludmFsaWRWYWxpZGF0b3JJbmRleAIXAAAARHVwbGljYXRlVmFsaWRhdG9ySW5kZXgCIwAAAEludmFsaWROdW1iZXJPZlNpZ25hdHVyZXNBbmRJbmRleGVzAiMAAABJbmNvcnJlY3ROdW1iZXJPZlNpZ25hdHVyZXNTdXBwbGllZAIQAAAASW52YWxpZFNpZ25hdHVyZQITAAAARGVwb3NpdEFtb3VudElzWmVybwILAAAAdXBkYXRlQWRtaW4EFQIAAAAHAAAAQWNjb3VudAEBAAAACwgAAABDb250cmFjdAEBAAAADBUUAAAADAAAAFVuYXV0aG9yaXplZAILAAAAUGFyc2VQYXJhbXMCBwAAAExvZ0Z1bGwCDAAAAExvZ01hbGZvcm1lZAIOAAAAQ29udHJhY3RQYXVzZWQCEwAAAEludm9rZUNvbnRyYWN0RXJyb3ICEwAAAEludm9rZVRyYW5zZmVyRXJyb3ICGgAAAEZhaWxlZFVwZ3JhZGVNaXNzaW5nTW9kdWxlAhwAAABGYWlsZWRVcGdyYWRlTWlzc2luZ0NvbnRyYWN0AiUAAABGYWlsZWRVcGdyYWRlVW5zdXBwb3J0ZWRNb2R1bGVWZXJzaW9uAiAAAABJbnZhbGlkQ291bnRPRlZhbGlkYXRvcnNSZXF1aXJlZAIaAAAARHVwbGljYXRlV2l0aGRyYXdSZXF1ZXN0ZWQCFAAAAFdpdGhkcmF3QW1vdW50SXNaZXJvAhMAAABXaXRoZHJhd2FsSXNFeHBpcmVkAhUAAABJbnZhbGlkVmFsaWRhdG9ySW5kZXgCFwAAAER1cGxpY2F0ZVZhbGlkYXRvckluZGV4AiMAAABJbnZhbGlkTnVtYmVyT2ZTaWduYXR1cmVzQW5kSW5kZXhlcwIjAAAASW5jb3JyZWN0TnVtYmVyT2ZTaWduYXR1cmVzU3VwcGxpZWQCEAAAAEludmFsaWRTaWduYXR1cmUCEwAAAERlcG9zaXRBbW91bnRJc1plcm8CBwAAAHVwZ3JhZGUEFAACAAAABgAAAG1vZHVsZR4gAAAABwAAAG1pZ3JhdGUVAgAAAAQAAABOb25lAgQAAABTb21lAQEAAAAPFgEdARUUAAAADAAAAFVuYXV0aG9yaXplZAILAAAAUGFyc2VQYXJhbXMCBwAAAExvZ0Z1bGwCDAAAAExvZ01hbGZvcm1lZAIOAAAAQ29udHJhY3RQYXVzZWQCEwAAAEludm9rZUNvbnRyYWN0RXJyb3ICEwAAAEludm9rZVRyYW5zZmVyRXJyb3ICGgAAAEZhaWxlZFVwZ3JhZGVNaXNzaW5nTW9kdWxlAhwAAABGYWlsZWRVcGdyYWRlTWlzc2luZ0NvbnRyYWN0AiUAAABGYWlsZWRVcGdyYWRlVW5zdXBwb3J0ZWRNb2R1bGVWZXJzaW9uAiAAAABJbnZhbGlkQ291bnRPRlZhbGlkYXRvcnNSZXF1aXJlZAIaAAAARHVwbGljYXRlV2l0aGRyYXdSZXF1ZXN0ZWQCFAAAAFdpdGhkcmF3QW1vdW50SXNaZXJvAhMAAABXaXRoZHJhd2FsSXNFeHBpcmVkAhUAAABJbnZhbGlkVmFsaWRhdG9ySW5kZXgCFwAAAER1cGxpY2F0ZVZhbGlkYXRvckluZGV4AiMAAABJbnZhbGlkTnVtYmVyT2ZTaWduYXR1cmVzQW5kSW5kZXhlcwIjAAAASW5jb3JyZWN0TnVtYmVyT2ZTaWduYXR1cmVzU3VwcGxpZWQCEAAAAEludmFsaWRTaWduYXR1cmUCEwAAAERlcG9zaXRBbW91bnRJc1plcm8CBAAAAHZpZXcFFAAHAAAABQAAAGFkbWluFQIAAAAHAAAAQWNjb3VudAEBAAAACwgAAABDb250cmFjdAEBAAAADAUAAAB0b2tlbgwIAAAAdG9rZW5faWQdAAYAAABwYXVzZWQBCgAAAHZhbGlkYXRvcnMQAhMhAAAAAhMAAAB2YWxpZGF0b3JzX3JlcXVpcmVkAgcAAAB2ZXJzaW9uBBUUAAAADAAAAFVuYXV0aG9yaXplZAILAAAAUGFyc2VQYXJhbXMCBwAAAExvZ0Z1bGwCDAAAAExvZ01hbGZvcm1lZAIOAAAAQ29udHJhY3RQYXVzZWQCEwAAAEludm9rZUNvbnRyYWN0RXJyb3ICEwAAAEludm9rZVRyYW5zZmVyRXJyb3ICGgAAAEZhaWxlZFVwZ3JhZGVNaXNzaW5nTW9kdWxlAhwAAABGYWlsZWRVcGdyYWRlTWlzc2luZ0NvbnRyYWN0AiUAAABGYWlsZWRVcGdyYWRlVW5zdXBwb3J0ZWRNb2R1bGVWZXJzaW9uAiAAAABJbnZhbGlkQ291bnRPRlZhbGlkYXRvcnNSZXF1aXJlZAIaAAAARHVwbGljYXRlV2l0aGRyYXdSZXF1ZXN0ZWQCFAAAAFdpdGhkcmF3QW1vdW50SXNaZXJvAhMAAABXaXRoZHJhd2FsSXNFeHBpcmVkAhUAAABJbnZhbGlkVmFsaWRhdG9ySW5kZXgCFwAAAER1cGxpY2F0ZVZhbGlkYXRvckluZGV4AiMAAABJbnZhbGlkTnVtYmVyT2ZTaWduYXR1cmVzQW5kSW5kZXhlcwIjAAAASW5jb3JyZWN0TnVtYmVyT2ZTaWduYXR1cmVzU3VwcGxpZWQCEAAAAEludmFsaWRTaWduYXR1cmUCEwAAAERlcG9zaXRBbW91bnRJc1plcm8CCAAAAHdpdGhkcmF3BBQABgAAAAIAAABpZBMgAAAAAgoAAABleHBpcmF0aW9uBQIAAAB0bxUCAAAABwAAAEFjY291bnQBAQAAAAsIAAAAQ29udHJhY3QBAQAAAAwGAAAAYW1vdW50BQoAAABzaWduYXR1cmVzEAITQAAAAAIHAAAAaW5kZXhlcxACAhUUAAAADAAAAFVuYXV0aG9yaXplZAILAAAAUGFyc2VQYXJhbXMCBwAAAExvZ0Z1bGwCDAAAAExvZ01hbGZvcm1lZAIOAAAAQ29udHJhY3RQYXVzZWQCEwAAAEludm9rZUNvbnRyYWN0RXJyb3ICEwAAAEludm9rZVRyYW5zZmVyRXJyb3ICGgAAAEZhaWxlZFVwZ3JhZGVNaXNzaW5nTW9kdWxlAhwAAABGYWlsZWRVcGdyYWRlTWlzc2luZ0NvbnRyYWN0AiUAAABGYWlsZWRVcGdyYWRlVW5zdXBwb3J0ZWRNb2R1bGVWZXJzaW9uAiAAAABJbnZhbGlkQ291bnRPRlZhbGlkYXRvcnNSZXF1aXJlZAIaAAAARHVwbGljYXRlV2l0aGRyYXdSZXF1ZXN0ZWQCFAAAAFdpdGhkcmF3QW1vdW50SXNaZXJvAhMAAABXaXRoZHJhd2FsSXNFeHBpcmVkAhUAAABJbnZhbGlkVmFsaWRhdG9ySW5kZXgCFwAAAER1cGxpY2F0ZVZhbGlkYXRvckluZGV4AiMAAABJbnZhbGlkTnVtYmVyT2ZTaWduYXR1cmVzQW5kSW5kZXhlcwIjAAAASW5jb3JyZWN0TnVtYmVyT2ZTaWduYXR1cmVzU3VwcGxpZWQCEAAAAEludmFsaWRTaWduYXR1cmUCEwAAAERlcG9zaXRBbW91bnRJc1plcm8CDQAAAHdpdGhkcmF3X2hhc2gGFAAGAAAAAgAAAGlkEyAAAAACCgAAAGV4cGlyYXRpb24FAgAAAHRvFQIAAAAHAAAAQWNjb3VudAEBAAAACwgAAABDb250cmFjdAEBAAAADAYAAABhbW91bnQFCgAAAHNpZ25hdHVyZXMQAhNAAAAAAgcAAABpbmRleGVzEAICFAABAAAABAAAAGhhc2gTIAAAAAIVFAAAAAwAAABVbmF1dGhvcml6ZWQCCwAAAFBhcnNlUGFyYW1zAgcAAABMb2dGdWxsAgwAAABMb2dNYWxmb3JtZWQCDgAAAENvbnRyYWN0UGF1c2VkAhMAAABJbnZva2VDb250cmFjdEVycm9yAhMAAABJbnZva2VUcmFuc2ZlckVycm9yAhoAAABGYWlsZWRVcGdyYWRlTWlzc2luZ01vZHVsZQIcAAAARmFpbGVkVXBncmFkZU1pc3NpbmdDb250cmFjdAIlAAAARmFpbGVkVXBncmFkZVVuc3VwcG9ydGVkTW9kdWxlVmVyc2lvbgIgAAAASW52YWxpZENvdW50T0ZWYWxpZGF0b3JzUmVxdWlyZWQCGgAAAER1cGxpY2F0ZVdpdGhkcmF3UmVxdWVzdGVkAhQAAABXaXRoZHJhd0Ftb3VudElzWmVybwITAAAAV2l0aGRyYXdhbElzRXhwaXJlZAIVAAAASW52YWxpZFZhbGlkYXRvckluZGV4AhcAAABEdXBsaWNhdGVWYWxpZGF0b3JJbmRleAIjAAAASW52YWxpZE51bWJlck9mU2lnbmF0dXJlc0FuZEluZGV4ZXMCIwAAAEluY29ycmVjdE51bWJlck9mU2lnbmF0dXJlc1N1cHBsaWVkAhAAAABJbnZhbGlkU2lnbmF0dXJlAhMAAABEZXBvc2l0QW1vdW50SXNaZXJvAgEfBgAAAAAIAAAATmV3QWRtaW4AAQAAAAkAAABuZXdfYWRtaW4VAgAAAAcAAABBY2NvdW50AQEAAAALCAAAAENvbnRyYWN0AQEAAAAMAQcAAABEZXBvc2l0AAMAAAAGAAAAc2VuZGVyFQIAAAAHAAAAQWNjb3VudAEBAAAACwgAAABDb250cmFjdAEBAAAADAsAAABkZXN0aW5hdGlvbh4gAAAABgAAAGFtb3VudAUCCAAAAFdpdGhkcmF3AAMAAAACAAAAaWQeIAAAAAkAAAByZWNpcGllbnQVAgAAAAcAAABBY2NvdW50AQEAAAALCAAAAENvbnRyYWN0AQEAAAAMBgAAAGFtb3VudAUEDAAAAEFkZFZhbGlkYXRvcgACAAAACQAAAHZhbGlkYXRvch4gAAAABwAAAHZlcnNpb24EBQ8AAABSZW1vdmVWYWxpZGF0b3IAAgAAAAkAAAB2YWxpZGF0b3IeIAAAAAcAAAB2ZXJzaW9uBAYVAAAAU2V0UmVxdWlyZWRWYWxpZGF0b3JzAAEAAAATAAAAdmFsaWRhdG9yc19yZXF1aXJlZAI'
        const res = await provider.sendTransaction(
            concordiumAccount,
            AccountTransactionType.Update,
            {
                amount: new CcdAmount(0n),
                address: {
                    index: TOKEN_CONTRACT_INDEX,
                    subindex: CONTRACT_SUB_INDEX,
                },
                receiveName: `${CONTRACT_NAME}.${method}`,
                maxContractExecutionEnergy: 100000n,
            },
            parameters,
            BRIDGE_CONTRACT_RAW_SCHEMA,
            0
        );
    }
}

export {
    connectConcordiumWallet,
    depositConcordiumTransaction,
    withdrawConcordiumTransaction,
}
